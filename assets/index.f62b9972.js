var c=Object.defineProperty;var m=(h,e,r)=>e in h?c(h,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[e]=r;var l=(h,e,r)=>(m(h,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();class f{constructor(e){l(this,"id");l(this,"hasWumpus");l(this,"hasHole");l(this,"hasBat");this.id=e,this.hasWumpus=!1,this.hasHole=!1,this.hasBat=!1}}class u{constructor(e,r,o=null){l(this,"arrowCount");l(this,"moveCount");l(this,"board",[]);l(this,"playerX",0);l(this,"playerY",0);l(this,"arrowX",-1);l(this,"arrowY",-1);l(this,"renderer");this.arrowCount=5,this.moveCount=0,this.generateGameboard(e,r),this.randomizePlayerPosition(),this.renderer=o,this.renderer!=null&&this.renderer.renderAll(this.board,this.playerX,this.playerY,this.arrowX,this.arrowY,this.arrowCount,this.moveCount)}randomizePlayerPosition(){for(;;){this.playerX=Math.round(Math.random()*(this.board.length-1)),this.playerY=Math.round(Math.random()*(this.board[0].length-1));const e=this.board[this.playerX][this.playerY];if(!e.hasWumpus&&!e.hasHole&&!e.hasBat)return}}move(e,r){let o,t;if(e==="player"||this.arrowX===-1)o=this.playerX,t=this.playerY;else if(e==="arrow")o=this.arrowX,t=this.arrowY;else return;const s=/^north|n$/i,i=/^east|e$/i,a=/^south|s$/i,n=/^west|w$/i;if(s.test(r))t--,this.moveCount++;else if(i.test(r))o++,this.moveCount++;else if(a.test(r))t++,this.moveCount++;else if(n.test(r))o--,this.moveCount++;else{console.log("Choose either North, East, South or West.");return}o===this.board.length&&(o=0),o===-1&&(o=this.board.length-1),t===this.board[0].length&&(t=0),t===-1&&(t=this.board[0].length-1),e==="player"?(this.playerX=o,this.playerY=t):e==="arrow"&&(this.arrowX=o,this.arrowY=t),this.triggerEvents(),this.adjacentSmells(),this.renderer!=null&&this.renderer.renderAll(this.board,this.playerX,this.playerY,this.arrowX,this.arrowY,this.arrowCount,this.moveCount)}triggerEvents(){const e=this.board[this.playerX][this.playerY],r=this.board[this.arrowX][this.arrowY];e.hasWumpus&&console.log("Game over"),e.hasHole&&console.log("Game over"),e.hasBat&&(this.randomizePlayerPosition(),console.log("landed on bat")),e===r&&console.log("you have shot yourself")}adjacentRooms(){let e=this.playerY-1,r=this.playerX+1,o=this.playerY+1,t=this.playerX-1;r===this.board.length&&(r=0),t===-1&&(t=this.board.length-1),o===this.board[0].length&&(o=0),e===-1&&(e=this.board[0].length-1);const s=this.board[this.playerX][e],i=this.board[r][this.playerY],a=this.board[this.playerX][o],n=this.board[t][this.playerY];return[s,i,a,n]}adjacentSmells(){for(const e of this.adjacentRooms())e.hasWumpus&&console.log("you smell of wumpus"),e.hasHole&&console.log("you sense the smell of sewage..")}wumpusPosition(){for(let e=0;e<this.board[0].length;e++)for(let r=0;r<this.board.length;r++)this.board[r][e].hasWumpus}moveWumpus(){for(let e=0;e<this.board[0].length;e++)for(let r=0;r<this.board.length;r++)if(this.board[r][e].hasWumpus){let o=r+1,t=e;o===this.board.length?o=0:t===this.board[0].length&&(t=0),console.log(r),console.log(e),this.board[r][e].hasWumpus=!1,this.board[o][t].hasWumpus=!0;return}}generateGameboard(e,r){if(e*r<20)throw new Error("The gameboard is too small! Choose a bigger one.");const o=[];for(let t=0;t<e;t++){const s=[];for(let i=0;i<r;i++){const a=new f(i*e+t+1);Math.random()<.2?a.hasHole=!0:Math.random()<.3&&(a.hasBat=!0),s.push(a)}o.push(s)}if(u.emptyRooms(o)<2){console.log("bad room, trying again!"),this.generateGameboard(e,r);return}u.randomizeWumpusPosition(o),this.board=o}static randomizeWumpusPosition(e){for(;;){const r=Math.round(Math.random()*(e.length-1)),o=Math.round(Math.random()*(e[0].length-1)),t=e[r][o];if(!t.hasHole&&!t.hasBat){t.hasWumpus=!0;break}}}static emptyRooms(e){let r=0;for(let o=0;o<e[0].length;o++)for(let t=0;t<e.length;t++){const s=e[t][o];!s.hasHole&&!s.hasBat&&r++}return r}}class p{constructor(e,r,o){l(this,"boardContainer");l(this,"arrowContainer");l(this,"moveContainer");this.boardContainer=document.querySelector(e),this.arrowContainer=document.querySelector(r),this.moveContainer=document.querySelector(o)}renderBoard(e,r,o,t,s){let i="";for(let a=0;a<e[0].length;a++){i+="<tr>";for(let n=0;n<e.length;n++)r===n&&o===a?i+=`<td class="board-square"> ${e[n][a].id} <img src="/player.jpg" width="50"></td>`:t===n&&s===a?i+=`<td class="board-square"> ${e[n][a].id} <img src="/arrow.jpg" width="50"></td>`:e[n][a].hasWumpus?i+=`<td class="board-square"> ${e[n][a].id} <img src="/wumpus.png" width="50"></td>`:e[n][a].hasHole?i+=`<td class="board-square"> ${e[n][a].id} <img src="/hole.jpg" width="50"></td>`:e[n][a].hasBat?i+=`<td class="board-square"> ${e[n][a].id} <img src="/bats.jpg" width="50"></td>`:i+=`<td class="board-square"> ${e[n][a].id} </td>`;i+="</tr>"}this.boardContainer.innerHTML=i}renderArrows(e){this.arrowContainer.innerHTML=e.toString()}renderMoves(e){this.moveContainer.innerHTML=e.toString()}renderAll(e,r,o,t,s,i,a){this.renderBoard(e,r,o,t,s),this.renderArrows(i),this.renderMoves(a)}}const g=new p("#boardContainer","#arrows","#moves"),d=new u(5,4,g);setTimeout(()=>d.move("arrow","n"),1e3);setTimeout(()=>d.move("arrow","s"),3e3);console.log(d.adjacentSmells());console.log(d);
